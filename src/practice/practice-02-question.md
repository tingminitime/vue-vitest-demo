# 【試験ノ章】第一個測驗：測試情境案例、Setup & Teardown 與 Matchers

## 練習目標：

- 測試案例與情境：`describe`、`it`
- 測試案例中 Setup 與 Teardown 環節有關的語法： `beforeEach`、`beforeAll`、`afterEach` 與 `beforeAll`
- 測試斷言中的各種 `Matchers` 與快照

## 故事

「柯基」是一名剛從某大學畢業的新鮮人，進入「汪汪」集團後每天不斷努力的練習開發。

「柯基」在完成上次提到的任務後，中午下樓到公司附近覓食時，遇到了一隻橘色虎斑貓「阿橘」，然而阿橘正面有難色地看著眼前的機台一直噴出好多貓食乾乾 ⋯⋯ 柯基決定上前瞭解狀況。

「你好我是柯基，怎麼這台機器一直噴出乾乾啊！？」柯基驚訝地看著眼前的機台。

「我是乾乾銀行的開發人員，眼前這台是『自動乾乾提存機』」阿橘嘆了口氣說「這台機器主要是供應平常貓貓們在日常被飼主餵太多乾乾，但又不想一次吃完的時候可以把乾乾存到這裡面來。」

「可是 ⋯⋯」阿橘話還沒說完，機器又噴出更多乾乾把阿橘埋起來了。「⋯⋯ 這台機器程式不知道為什麼一直有問題，所以我們打算重新來處理他。」

「當然，如果你協助我們的話就給你一年份的乾乾」阿橘邊說邊咬了一口嘴邊的乾乾，然後遞了一張規格書給柯基。柯基直接原地傻眼了幾秒後緩緩說道「那 ⋯⋯ 乾乾可以換成狗狗可食用的嗎？」

## 題目

自動乾乾提存機軟體控制主要是由一個 `FoodBank` 類別在負責處理，其中核心的功能主要有「開戶」、「存款」和「提款」：

```javascript
export class FoodBank {
  constructor() {
    this.safe = {
      Orange: { food: 100 }
    }
  }
  // 開戶
  openAccount(name) {}
  // 存款
  deposit(name, food) {}
  // 提款
  withdraw(name, food) {}
}
```

而規格對上述程式功能介面上有一些限制要求：

- 資料規格
  - 銀行紀錄格式為：
    ```javascript
    safe 物件 {
      name: food
    }
    ```
  - `name`：開戶者名稱，預設資料類型為 `string`。
  - `food`：「乾乾」單位，預設資料類型為 `number`。
- 開戶
  - 需傳入 `name`，並檢查是否開過戶頭，若有開過戶頭則回應 `您已開過戶頭囉`。
  - 交易成功，在 Safe 物件中建立用戶資料。
  - 開戶完成後該方法要回應 `開戶完成`。
- 存款
  - 需傳入 `name`，若查詢不到戶頭則交易失敗，該方法要回應 `查詢不到該用戶，請重新確認。`
  - 交易成功，將傳入 `food` 存入 Safe 物件中
  - 交易完成後該方法要回應 `存款完成，戶頭目前餘額 {該用戶乾乾數量}`
- 提款
  - 需傳入 `name`，若查詢不到戶頭則交易失敗，該方法要回應 `查詢不到該用戶，請重新確認。`
  - 若傳入的 `food` 要求超過該用戶戶頭則交易失敗，該方法要回應 `餘額不足，你帳戶目前餘額為 {該用戶乾乾數量}`
  - 交易成功，從 Safe 物件中扣除該用戶的 `food`
  - 交易完成後該方法要回應 `提款完成，戶頭目前餘額 {該用戶乾乾數量}`

> 測試程式碼 `/src/practice/practice-04.spec.js`
> 產品程式碼 `/src/practice/practice-04.js`
